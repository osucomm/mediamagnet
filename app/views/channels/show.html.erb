<%- if ! @channel.entity.approved %>
  <%= render 'shared/message', flash_type: :alert, no_close: true, message: "#{@channel.entity.name} has been registered but not approved. Content from this channel will not appear in feeds." %>
<%- end %>

<!--channel header-->
<div class="jumbotron jumbotron-<%= @channel.type_name.downcase %>">
	<div class="container">
		<div class="row">
  			<div class="col-md-8">        
  				<h1>
  					<img class="channel-type-icon" style="width: 40px;" src="http://newmedia.osu.edu/projects/media-magnet/site/img/<%= @channel.type_name.downcase %>-box.png">
  					<img src="https://pbs.twimg.com/profile_images/3433597373/0a80bbe598692a73112d6df2ddca6fa9_400x400.png" style="width: 40px;">
  					<%= title @channel.name %> <%= channel_action_links @channel, [:update] %>
        		</h1>
          </div>
			<div class="col-md-4 col-md-offset-0">
				<p class="small channel-desc">			
				"<strong><%= link_to @channel.name, @channel.url %></strong>" 
				is a <strong><%= link_to @channel.type.name.capitalize, @channel.type.url %> channel</strong> 
				managed by <strong><%= link_to @channel.entity.name, @channel.entity %></strong>.
			</p>
			</div>
			<p class="col-md-8 channel-profile-desc-twitter">
				<%= @channel.description %>
			</p>      
    	</div>
	</div>
</div>

<!--channel content-->
<div id="page-content" class="container">
    <div class="messages"><%= render 'shared/flash' %></div>
	<div class="row ">
  		<div class="col-md-4">
  			<h2 class="content-leadin">Latest Content</h2>
  			<small><strong>Last updated:</strong> <%= time_or_dash(@channel.last_polled_at, :pretty_long) %></small>
		</div>
    	<div class="col-md-3 col-md-offset-5">
			  <%- if @channel.item_count > 3 %>
				<p class="content-list-controls">
  					<button type="button" class="btn btn-default btn-sm"><%= link_to 'View all content', channel_items_path(channel_id: @channel.id) %> (<%= @channel.item_count %> items)</button>
				</p>
  			<%- end %>
		</div>
	</div>
	<%#- if @channel.type_name.downcase=="twitter" %>
	  <%#= render 'channels/show.twitter.table.html.erb' %>
	  <%#= render 'channels/show.twitter.table.html.erb' %>
	<%#- end %>	
	<table class="table table-striped table-content">
	  <tbody>
		<tr>
		<th class="col-md-1">Date</th>
		<th class="">Tweet</th>
		<th class=""><!--Visuals--></th>
	  </tr>
		  <%- @channel.items.take(4).each do |item| %>
			<tr>
			  <td>
				<p class="nobr"><%= time_or_dash(item.published_at, :med_omit_year) %></p>
			  </td>
			  <td>
					<%= link_to item, item %>
					<hr/>
					<p class="small text-rightx">
						Replies: <mark>item.replies???</mark> | Retweets: <mark>item.retweets???</mark> | <a href="<%= link_to @item.link.to_s %>">View on Twitter</a>
					</p>
			  </td>
			  <td>
				<%- if @item.assets.present? %>
					<%- @item.assets.each do |asset| %>
						<%= render_asset(asset) %>
					<%- end %>
				<%- end %>
			  </td>
		</tbody>
	</table>	
	<h2>Keywords <small><%= help_icon_for('Keyword') %></small></h2>

	<div>
		<%- if @channel.keywords.any? %>
		  <%= keyword_labels(@channel.keywords) %>
		<%- else %>
		  There are no keywords associated with this channel.
		<%- end %>
	</div>

	<div class="">
	  <%= render 'mappings/mappings', mappable: @channel %>
	</div>

	<div class="">
	  <%- if @channel.display_contact %>
		<h2>Contact</h2>
		<%= render partial: "contacts/contact", locals: { contact: @channel.display_contact } %>
	  <%- end %>
	</div>
</div>
<!--end content-->
